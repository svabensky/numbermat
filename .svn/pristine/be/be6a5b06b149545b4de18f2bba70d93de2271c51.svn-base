package Numbermat.Problems;

import Numbermat.Algorithms;
import Numbermat.GUI.utils.Configuration;
import Numbermat.Utils;

/**
 *
 * @author Valdemar Svabensky <395868@mail.muni.cz>
 */
public class EulerPhiProblem extends MathProblem {
    
    private int n;
    
    public EulerPhiProblem(String difficulty) {
        int lowerBound = Configuration.initLowerBound(difficulty);
        int upperBound = Configuration.initUpperBound(difficulty);
        int n1 = Algorithms.randInt(lowerBound, upperBound);
        setVariables(n1);
    }
    
    public EulerPhiProblem(int n1) {
        setVariables(n1);
    }
    
    private void setVariables(int n1) {
        n = n1;
        result = new int[1];
        result[0] = Algorithms.eulerPhi(n);
        prepareAll();
    }

    @Override
    protected void prepareProblemPlaintext() {
        problemPlaintext = "Ï†(" + n + ") = ?" + Utils.NEWLINE + Utils.NEWLINE;
    }

    @Override
    protected void prepareProblemLaTeX() {
        problemLaTeX = "$\\varphi(" + n + ") =$";
    }

    @Override
    protected void prepareSolutionPlaintext() {
        solutionPlaintext = Algorithms.eulerPhiSteps(n) + Utils.NEWLINE;
    }

    @Override
    protected void prepareSolutionLaTeX() {
        String solutionCopy = solutionPlaintext.replaceAll("=", "&=");
        solutionCopy = solutionCopy.replaceAll("\\*", "\\\\cdot");
        
        StringBuilder sb = new StringBuilder();
        sb.append("\\begin{align}").append(Utils.NEWLINE);
        sb.append(solutionCopy);
        Utils.insertLaTeXNewlineSymbol(sb, sb.lastIndexOf("{align}") + 9, false);
        sb.append("\\end{align}");
        solutionLaTeX = sb.toString();
    }
}
